{
  "name": "Track",
  "type": "object",
  "properties": {
    "title": {
      "type": "string",
      "description": "Name of the track/song"
    },
    "artist": {
      "type": "string",
      "description": "Artist name"
    },
    "album": {
      "type": "string",
      "description": "Album name"
    },
    "spotify_id": {
      "type": "string",
      "description": "Spotify track ID"
    },
    "spotify_album_art": {
      "type": "string",
      "description": "URL to Spotify album artwork"
    },
    "spotify_url": {
      "type": "string",
      "description": "Spotify track URL for playback"
    },
    "duration_minutes": {
      "type": "number",
      "description": "Duration in minutes"
    },
    "bpm": {
      "type": "number",
      "description": "Beats per minute"
    },
    "intensity": {
      "type": "string",
      "enum": [
        "low",
        "medium",
        "high",
        "extreme"
      ],
      "description": "Intensity level of the track"
    },
    "focus_area": {
      "type": "string",
      "enum": [
        "warmup",
        "climb",
        "sprint",
        "recovery",
        "cooldown",
        "intervals",
        "endurance"
      ],
      "description": "Main focus of this track"
    },
    "track_type": {
      "type": "string",
      "description": "Type of ride (e.g., Rhythm Ride, Speed Intervals, Strength Climb)"
    },
    "position": {
      "type": "string",
      "description": "Primary position (e.g., Saddle, Standing, Saddle \u2192 Standing)"
    },
    "resistance_min": {
      "type": "number",
      "description": "Minimum resistance level"
    },
    "resistance_max": {
      "type": "number",
      "description": "Maximum resistance level"
    },
    "cadence_min": {
      "type": "number",
      "description": "Minimum cadence (rpm)"
    },
    "cadence_max": {
      "type": "number",
      "description": "Maximum cadence (rpm)"
    },
    "choreography": {
      "type": "array",
      "description": "Choreography moves/cues for the track",
      "items": {
        "type": "object",
        "properties": {
          "timestamp": {
            "type": "string",
            "description": "When to start this move (e.g., 0:30)"
          },
          "exercise": {
            "type": "string",
            "description": "Exercise type (e.g., flat, climb, sprint, recovery, interval)"
          },
          "resistance": {
            "type": "string",
            "description": "Resistance display (e.g., L5, L8)"
          },
          "gear": {
            "type": "number",
            "description": "Gear level (1-10)"
          },
          "position": {
            "type": "string",
            "enum": [
              "Ride easy",
              "Seated Climb",
              "Racing Climb",
              "Standing Climb"
            ],
            "description": "Riding position"
          },
          "rpmMin": {
            "type": "number",
            "description": "Minimum RPM"
          },
          "rpmMax": {
            "type": "number",
            "description": "Maximum RPM"
          },
          "note": {
            "type": "string",
            "description": "Optional coaching note or cue"
          }
        }
      }
    },
    "cues": {
      "type": "array",
      "description": "Coaching cues and motivational phrases",
      "items": {
        "type": "string"
      }
    },
    "notes": {
      "type": "string",
      "description": "General notes about the track"
    }
  },
  "required": [
    "title"
  ],
  "rls": {
    "create": true,
    "read": {
      "$or": [
        {
          "created_by": "{{user.email}}"
        },
        {
          "user_condition": {
            "role": "admin"
          }
        }
      ]
    },
    "update": {
      "$or": [
        {
          "created_by": "{{user.email}}"
        },
        {
          "user_condition": {
            "role": "admin"
          }
        }
      ]
    },
    "delete": {
      "$or": [
        {
          "created_by": "{{user.email}}"
        },
        {
          "user_condition": {
            "role": "admin"
          }
        }
      ]
    }
  }
}